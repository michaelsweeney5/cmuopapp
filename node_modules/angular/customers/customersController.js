angular.module('customersApp', []).controller('customersCtrl', function($scope, $http) {

	$scope.radioByChange = function() {
		$scope.searchBy = $scope.radioBy.value;
		fetch();
	};
	
	$scope.change = function() {
		fetch();
	}
	
	function fetch() {
		if($scope.searchBy == null) {
			//Defaults to 700 Number
			$http.get("http://localhost:3000/api/customersapi?collection=customer&searchby=number&search=" + $scope.searchField)
				.success(function(response){
					$scope.details = response;
				});
		}
		else {
			//Otherwise parameterize the search
			$http.get("http://localhost:3000/api/customersapi?collection=customer&searchby=" + $scope.searchBy + "&search=" + $scope.searchField)
				.success(function(response){
					$scope.details = response;
				});
		}
		
	}
}); 