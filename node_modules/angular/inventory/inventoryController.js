angular.module('inventoryApp', []).controller('inventoryCtrl', function($scope, $http) {
    $scope.search = function() {
        return $scope.searchField;
    }
	var url = "http://localhost:3000/api/inventoryapi/:";
	
	$scope.change = function(){
		fetch();
	};
	
	$scope.radioGroupChange = function() {
		$scope.collection = $scope.radioGroup.value;
		fetch();
	};
	
	$scope.radioByChange = function() {
		$scope.searchBy = $scope.radioBy.value;
		fetch();
	};
	
	function fetch() {
		if($scope.collection == null) {
			$scope.collection = "boat";
		}
		else {
			if($scope.searchBy == null) {
				//Defaults to name
				$http.get("http://localhost:3000/api/inventoryapi/find?collection=" + $scope.collection + "&searchby=name&search=" + $scope.searchField)
					.success(function(response){
						$scope.details = response;
					});
			}
			else {
				//Otherwise parameterize the search
				$http.get("http://localhost:3000/api/inventoryapi/find?collection=" + $scope.collection + "&searchby=" + $scope.searchBy + "&search=" + $scope.searchField)
					.success(function(response){
						$scope.details = response;
					});
			}
		}
	}

});